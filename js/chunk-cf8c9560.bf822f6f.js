(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf8c9560"],{"3c27":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid vld-parent"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"background-color":"#555","is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}},[a("LoadEffect",{attrs:{slot:"default"},slot:"default"})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dashboard"},[a("header",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v("產品管理列表")]),a("BtnGroup",{staticClass:"newBtn",attrs:{btns:t.btn},on:{"btn-emit":t.BtnClick}})],1),a("main",{staticClass:"body"},[a("div",{staticClass:"table"},[a("div",{staticClass:"table-head"},[a("div",{staticClass:"tr"},[a("span",{staticClass:"th"},[t._v("分類")]),a("span",{staticClass:"th"},[t._v("產品名稱")]),a("span",{staticClass:"th"},[t._v("原價")]),a("span",{staticClass:"th"},[t._v("售價")]),a("span",{staticClass:"th"},[t._v("是否啟用")]),a("span",{staticClass:"th"},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","user-cog"]}})],1)])]),a("div",{directives:[{name:"scrollbar",rawName:"v-scrollbar"}],staticClass:"table-body"},t._l(t.products,(function(e){return a("item",{key:e.id,attrs:{prod:e},on:{"btn-emit":t.BtnClick}})})),1)]),a("pagination",{attrs:{total_pages:t.total,page:t.page},on:{"update:page":function(e){t.page=e}}})],1)])])]),a("Modal",{ref:"modal",attrs:{size:"xl"},on:{dataEmit:t.newProd}})],1)},s=[],n=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tr vld-parent"},[a("loading",{attrs:{active:t.isLoading,color:"#218DFE","can-cancel":!0,loader:"dots","is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),a("span",{staticClass:"td"},[t._v(t._s(t.prod.category))]),a("span",{staticClass:"td"},[t._v(t._s(t.prod.title))]),a("span",{staticClass:"td"},[t._v(t._s(t._f("Dollar")(t._f("Currency")(t.prod.origin_price))))]),a("span",{staticClass:"td"},[t._v(t._s(t._f("Dollar")(t._f("Currency")(t.prod.price))))]),a("span",{staticClass:"td"},[a("toggle",{attrs:{prodId:t.prod.id.substr(0,5),disabled:!0,checked:t.prod.enabled}})],1),a("span",{staticClass:"td"},[a("BtnGroup",{attrs:{btns:t.btns,border:!0,btnSize:"md"},on:{"btn-emit":t.btnClick}})],1),a("Dialog",{ref:"dialog",on:{dialog:t.confirm}},[t._v("刪除此產品?")]),a("Modal",{ref:"modal",attrs:{size:"xl"},on:{dataEmit:t.updateProd}})],1)}),o=[],c=(a("99af"),a("c67a")),l={mixins:[c["a"]],methods:{getProductList:function(t){var e=this;this.isLoading=!0,this.$http.get("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/products?page=").concat(t,"&paged=10")).then((function(t){200===t.status&&(e.products=t.data.data,e.total=t.data.meta.pagination.total_pages,e.isLoading=!1)})).catch((function(t){e.isLoading=!1,e.errorNotify(t.response.data.message)}))},createProduct:function(t){var e=this;this.isLoading=!0,this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product"),t).then((function(t){200===t.status&&(e.getProductList(),e.successNotify("商品新增成功"))})).catch((function(t){e.isLoading=!1,e.errorNotify(t.response.data.message)}))},editProduct:function(t){var e=this;this.isLoading=!0,this.$http.patch("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t.id),t).then((function(a){200===a.status&&(e.isLoading=!1,e.$parent.getProductList(e.page),e.successNotify("".concat(t.title," 編輯成功")))})).catch((function(t){e.isLoading=!1,e.errorNotify(t.response.data.message)}))},destroyProduct:function(t){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t)).then((function(t){200===t.status&&(e.isLoading=!1,e.$parent.getProductList(),e.successNotify("商品刪除成功"))})).catch((function(t){e.isLoading=!1,e.errorNotify(t.response.data.message)}))}}},r=a("c3a3"),d={name:"ProductItem",mixins:[l],components:{Modal:r["default"]},props:{prod:{type:Object,required:!0}},data:function(){return{isLoading:!1,btns:[{class:"info",outline:!0,content:"",icon:"marker",action:"edit"},{class:"error",outline:!0,content:"",icon:"trash-alt",action:"del"}]}},methods:{btnClick:function(t){this["".concat(t,"Handler")]()},editHandler:function(){this.$refs.modal.ModalShow=!0,this.$refs.modal.ModalTitle="編輯產品",this.$refs.modal.body="Product",this.$refs.modal.inputTemp=this.prod},updateProd:function(t){this.editProduct(t)},delHandler:function(){this.$refs.dialog.isVisible=!0},confirm:function(){this.destroyProduct(this.prod.id)}}},u=d,p=(a("4f7e"),a("2877")),f=Object(p["a"])(u,n,o,!1,null,"185b90ec",null),m=f.exports,h={mataInfo:{title:"-產品管理"},name:"Products",components:{item:m,Modal:function(){return Promise.resolve().then(a.bind(null,"c3a3"))}},mixins:[l],created:function(){this.getProductList(this.page)},data:function(){return{isLoading:!1,page:1,total:1,products:[],btn:[{class:"primary",outline:!1,content:"新增產品",icon:"",action:"new",size:"xl"}]}},methods:{BtnClick:function(t,e){this["".concat(t,"Handler")](e)},newHandler:function(){this.$refs.modal.ModalShow=!0,this.$refs.modal.ModalTitle="新增產品"},newProd:function(t){this.createProduct(t)}},watch:{page:function(){this.getProductList(this.page)}}},g=h,b=(a("457d"),Object(p["a"])(g,i,s,!1,null,"0fe81aa7",null));e["default"]=b.exports},"457d":function(t,e,a){"use strict";var i=a("d3b4"),s=a.n(i);s.a},"4f7e":function(t,e,a){"use strict";var i=a("9449"),s=a.n(i);s.a},9449:function(t,e,a){},bf8f:function(t,e,a){"use strict";var i=a("f769"),s=a.n(i);s.a},c3a3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ModalShow?a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal__container",class:"modal__wrapper-"+t.size},[a("header",{staticClass:"modal__header"},[t._t("header",[t._v(" "+t._s(t.ModalTitle)+" ")]),a("div",{staticClass:"times",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}},[t._v("×")])],2),a("div",{staticClass:"modal__body"},[a("ValidationObserver",{ref:"form",staticClass:"container-fluid",attrs:{tag:"form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("InputField",{attrs:{label:"圖片網址",attrs:t.inputSet},model:{value:t.inputTemp.imageUrl[0],callback:function(e){t.$set(t.inputTemp.imageUrl,0,e)},expression:"inputTemp.imageUrl[0]"}})],1),t._l(t.imgUrlLength,(function(e){return a("div",{key:e,staticClass:"col-12"},[a("InputField",{attrs:{label:"圖片網址(option)",attrs:t.inputSet},model:{value:t.inputTemp.imageUrl[e],callback:function(a){t.$set(t.inputTemp.imageUrl,e,a)},expression:"inputTemp.imageUrl[i]"}})],1)})),a("hr"),a("div",{staticClass:"col-12 vld-parent"},[a("loading",{attrs:{active:t.isUplading,"can-cancel":!0,"is-full-page":!1},on:{"update:active":function(e){t.isUplading=e}}},[a("uploading",{attrs:{slot:"default"},slot:"default"})],1),a("InputUpload",{ref:"file",on:{uploadSubmit:t.upload}})],1)],2)])]),a("div",{staticClass:"col-8"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("InputField",{attrs:{label:"標題",attrs:t.inputSet},model:{value:t.inputTemp.title,callback:function(e){t.$set(t.inputTemp,"title",e)},expression:"inputTemp.title"}})],1),a("div",{staticClass:"col-2"},[a("span",{staticClass:"label toggle"},[t._v("是否啟用")]),a("toggle",{attrs:{prodId:"isEnable",checked:t.inputTemp.enabled},model:{value:t.inputTemp.enabled,callback:function(e){t.$set(t.inputTemp,"enabled",e)},expression:"inputTemp.enabled"}})],1),a("div",{staticClass:"col-6"},[a("InputField",{attrs:{label:"分類",attrs:t.inputSet},model:{value:t.inputTemp.category,callback:function(e){t.$set(t.inputTemp,"category",e)},expression:"inputTemp.category"}})],1),a("div",{staticClass:"col-6"},[a("InputField",{attrs:{label:"單位",attrs:t.inputSet},model:{value:t.inputTemp.unit,callback:function(e){t.$set(t.inputTemp,"unit",e)},expression:"inputTemp.unit"}})],1),a("div",{staticClass:"col-6"},[a("InputField",{attrs:{label:"原價",attrs:t.inputSet},model:{value:t.inputTemp.origin_price,callback:function(e){t.$set(t.inputTemp,"origin_price",t._n(e))},expression:"inputTemp.origin_price"}})],1),a("div",{staticClass:"col-6"},[a("InputField",{attrs:{label:"售價",attrs:t.inputSet},model:{value:t.inputTemp.price,callback:function(e){t.$set(t.inputTemp,"price",t._n(e))},expression:"inputTemp.price"}})],1),a("hr"),a("div",{staticClass:"col-12"},[a("InputField",{attrs:{type:"textarea",label:"產品描述",attrs:t.inputSet},model:{value:t.inputTemp.content,callback:function(e){t.$set(t.inputTemp,"content",e)},expression:"inputTemp.content"}})],1),a("div",{staticClass:"col-12"},[a("InputField",{attrs:{type:"textarea",label:"產品說明",attrs:t.inputSet},model:{value:t.inputTemp.description,callback:function(e){t.$set(t.inputTemp,"description",e)},expression:"inputTemp.description"}})],1)])])])])])],1),a("div",{staticClass:"modal__footer"},[a("BtnGroup",{staticClass:"mr-3",attrs:{btns:t.btnCheck},on:{"btn-emit":t.validate}}),a("BtnGroup",{attrs:{btns:t.cancleBtn},on:{"btn-emit":t.closeModal}})],1)])])]):t._e()},s=[],n=(a("d3b7"),a("9c87")),o=a("6346"),c={name:"ProductModal",components:{InputUpload:n["a"],uploading:function(){return a.e("chunk-d13c1c3e").then(a.bind(null,"4437"))}},mixins:[o["a"]],props:{size:{type:String,default:"md"}},data:function(){return{ModalShow:!1,ModalTitle:"",inputSet:{"標題":{rules:"required",placeholder:"請輸入標題",type:"text"},"分類":{rules:"required",placeholder:"請輸入分類",type:"text"},"單位":{rules:"required",placeholder:"請輸入單位",type:"text"},"原價":{rules:"required",placeholder:"請輸入原價",type:"number"},"售價":{rules:"required",placeholder:"請輸入售價",type:"number"},"產品描述":{rules:"required",placeholder:"請輸入產品描述",type:"textarea"},"產品說明":{rules:"required",placeholder:"請輸入產品說明",type:"textarea"},"圖片網址":{rules:"required",placeholder:"請輸入圖片網址",type:"text"},"圖片網址(option)":{rules:"",placeholder:"請輸入圖片網址",type:"text"}},btnCheck:[{class:"primary",outline:!0,content:"確定",icon:"",action:"checked"}],cancleBtn:[{class:"error",outline:!0,content:"取消",icon:"",action:"cancle"}],isUplading:!1,inputTemp:{imageUrl:[]}}},methods:{closeModal:function(){this.ModalShow=!1,this.clearInput()},clearInput:function(){this.inputTemp={},this.$set(this.inputTemp,"imageUrl",[])},validate:function(){var t=this;this.$refs.form.validate().then((function(e){e&&(t.$emit("dataEmit",t.inputTemp),t.closeModal())}))},upload:function(t){var e=this;this.editStorage(t).then((function(t){e.$refs.file.src="",e.inputTemp.imageUrl.push(t)}))}},computed:{imgUrlLength:function(){return this.inputTemp.imageUrl.length<=3?this.inputTemp.imageUrl.length:3}}},l=c,r=(a("bf8f"),a("2877")),d=Object(r["a"])(l,i,s,!1,null,"9be8ec88",null);e["default"]=d.exports},c67a:function(t,e,a){"use strict";e["a"]={methods:{successNotify:function(t){this.$toast.success(t)},errorNotify:function(t){this.$toast.error(t)},dialogNotify:function(){}}}},d3b4:function(t,e,a){},f769:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cf8c9560.bf822f6f.js.map